<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Start {{ activity_name }} - {{ varietal_name }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="{{ url_for('static', filename='activity.css') }}" rel="stylesheet" />
  {% if activity_number == 1 %}
    <link href="{{ url_for('static', filename='drag_drop.css') }}" rel="stylesheet" />
  {% endif %}
</head>
<body>
  <div class="activity-wrapper container-fluid">
    <!-- Top Bar -->
    <div class="row my-3 align-items-center">
      <div class="col-md-1">
        <form method="post" action="{{ url_for('map') }}">
          <button type="submit" class="btn-hero">map</button>
        </form>
      </div>
      <div class="col-md-10 text-center">
        <h2>{{ varietal_name }}</h2>
      </div>
      <div class="col-md-1">
        {% if activity_number == 3 %}
          <form method="post" action="{{ url_for('complete_varietal', varietal_name=varietal_url) }}">
            <button type="submit" class="btn-hero" id="continue-btn">continue</button>
          </form>
        {% else %}
          <form method="post" action="{{ url_for('activity_intro', varietal_name=varietal_url, activity_number=activity_number+1) }}">
            <button type="submit" class="btn-hero" id="continue-btn">continue</button>
          </form>
        {% endif %}
      </div>
    </div>

    <!-- Activity Title and Hint -->
    <h1 class="activity-title text-center">{{ activity_name }}</h1>
    <p class="activity-hint text-center">Hint: {{ hint }}</p>

    {% if activity_number == 1 %}
      <!-- Drag and Drop Layout -->
      <div class="row">
        <!-- Left: Notes Grid -->
        <div class="col-md-8 d-flex flex-wrap notes-grid justify-content-start">
          {% for note in ["apple", "lemon", "peach", "blackberry", "oak", "tobacco", "lime", "grapefruit", "butter", "vanilla", "cherry", "smoke", "floral"] %}
            <img src="{{ url_for('static', filename='icons/' + note + '.png') }}"
                 alt="{{ note }}"
                 class="drag-item"
                 draggable="true"
                 data-note="{{ note }}">
          {% endfor %}
        </div>

        <!-- Right: Drop Zone and Correct Answers -->
        <div class="col-md-4 text-center">
          <div class="drop-zone mb-3">
            <img src="{{ url_for('static', filename='wine_glass.png') }}" alt="Wine Glass" class="img-fluid" />
          </div>
          <div class="correct-notes d-flex flex-wrap justify-content-center"></div>
        </div>
      </div>

      <!-- Inject JS variable with correct notes -->
      <script>
        const correctNotes = JSON.parse('{{ correct_notes | tojson | safe }}');
      </script>
      <script src="{{ url_for('static', filename='drag_drop.js') }}"></script>
    {% else %}
      <!-- Placeholder for non-drag-and-drop activities -->
      <div class="text-center mt-5">
        <p>This activity type is not yet implemented on this page.</p>
      </div>
    {% endif %}

    <!-- Back Button -->
    <div class="row mt-4">
      <div class="col-12 text-center">
        <form method="post" action="{{ url_for('activity_intro', varietal_name=varietal_url, activity_number=activity_number) }}">
          <button type="submit" class="btn-hero">back</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS + jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


